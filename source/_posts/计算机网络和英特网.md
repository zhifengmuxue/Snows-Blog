---
title: 计算机网络和因特网
date: 2023-02-18 14:55:51
tags: [因特网]
categories: [知识博客]
---

<!--more-->

## 描述因特网：

1.构成因特网的基本硬件和软件组件，即具体构成描述

2.根据为分布式应用提供服务的联网基础设施，即服务描述

### 具体构成描述

​	所有连接到因特网的设备都被成为主机(host)或 **端系统**(end system)

​	端系统通过**通信链路** communication link 和 **分组交换机** packet switch 的网络连接到一起

**通信链路** ：   由不同类型的物理媒介组成。不同的链路能够以不同的速率传输数据

**分组交换机**：	从一条入通信链路接受到达的**分组** packet ，并从另一条出通信链路转发该分组

**分组** :		一台端系统向另一台端系统发送数据时，发送端系统将数据分段，并为每段加上首部字节

​	分组交换机有两种常见的类型：**路由器** router 和 **链路交换机** link-layer switch ,链路交换机通常应用于接入网中，而路由器通常用于网络核心中。

​	从发送端系统到接收端系统，一个分组所经历的一系列通信链路和分组交换机称为通过该网络的 **路径** path或route

<img src="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E8%8B%B1%E7%89%B9%E7%BD%91/1.png" alt="1" style="zoom:60%;" />

**因特网服务商** Internet Service Provider, ISP：端系统通过ISP接入因特网，较低层的ISP通过国家的、国际的较高层的ISP互连起来，每一个ISP网络都是独立管理的，运行着IP协议，尊从一定的命名和地址规则。

**协议 protocol**：控制因特网中的信息的接受和发送

<br>

### 服务描述

​		运行在端系统上的各种应用因为涉及多个相互交换数据的端系统，故被称为**分布式应用** distributed application，因特网应用运行在端系统上，即它们并不运行在网络核心中的分组交换机上。那么运行在一个端系统上的应用“指挥”因特网向运行在另一个端系统上的软件传送数据呢？这就用到了 **套接字接口** socket interface

​		该接口规定了运行在一个端系统上的程序请求因特网基础设施向运行在另一个端系统上的特定目的地程序交付数据的方式

<br>

### 什么是协议

报文的交换以及发送和接收这些报文时所采取的操作时定义一个协议的关键元素		

​		**协议** 定义了在两个或多个通信实体之间交换的报文的格式和顺序，以及报文的发送/接收或其他事件所采取的操作

例如，在两台物理机上连接的计算机中，硬件实现的协议控制了在两块网络接口卡间的比特流

​			在端系统中，拥塞控制协议控制了在发送方和接收方之间传输的分组发送的速率

​			路由器中的协议决定了分组从源到目的地的路径

<br>

<br>

<br>

## 网络边缘

​		端系统处于网络边缘，端系统包括 **桌面计算机**(桌面PC，Max，linux设备等)、**服务器**(web和电子邮件服务器等)、**移动计算机**(便携机、智能手机和平板电脑)

### 接入网

​		**接入网：**将端系统物理连接到其**边缘路由器 **edge route 的网络，边缘路由器是端系统到任何其他远程端系统的路径上的第一台路由器。如图中粗直线相连接的就是边缘路由

​		<img src="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E8%8B%B1%E7%89%B9%E7%BD%91/image-20230218164026044.png" alt="image-20230218164026044" style="zoom:33%;" />

下文介绍接入网的三种环境（家庭、公司、广域移动无线）

<br>

#### 家庭接入：DSL、电缆、FTTH和5G固定式无线

​		**DSL数字用户线** Digital Subscriber Line ,DSL :通常是从通过本地电话接入的本地电话公司处获得的DSL因特网接入，在使用时，本地电话公司也是他的ISP

​		每个用户的DSL调制解调器使用现有的电话线于位于电话公司的本地中心局( CO )中的数字用户线接入复用器（DSLAM）交换数据，用户的解调器将得到的数字数据转化为高频音，通过电话线传输给中心局，在DSLAM处被转换回数字形式

<img src="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E8%8B%B1%E7%89%B9%E7%BD%91/image-20230218164926500.png" alt="image-20230218164926500" style="zoom: 25%;" />

分频器将到达家庭的数据信号和电话信号分隔开，并将数据型号转发给DSL调制，同时，中心局的DSLAM把数据信号和电话信号分隔开，并将数据送往因特网。

​		DSL标准定义了多个传输速率，包括24 Mbps和52 Mbps的下行传输速率，以及3.5 Mbps和16 Mbps的上行传输速率，最新的标准规定了有关 1 Gbps 的总计上行加下行速率，由于上行和下行速率是不同的，这种接入被称为不对称的

​		**电缆因特网接入** cable Internet access :从提供有线电视的公司获得电缆因特网接入，光缆将电缆头段连接到地区枢纽，通过传统的同轴电缆到达各个家庭和各个公寓，一般每个地区枢纽支持500~5000个家庭，因为此过程中即用到了光纤又用到了同轴电缆，它常被称为 **混合光纤同轴 Hybrid Fiber Coax,HFC系统**

<img src="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E8%8B%B1%E7%89%B9%E7%BD%91/image-20230218170711425.png" alt="image-20230218170711425" style="zoom:25%;" />

​		电缆因特网接入需要特殊的调制解调器，**电缆调制解调器** cable modem，同时在电缆头端应用**电缆调制解调器端接系统** Cable Modem Termination System,CMTS 这与DSL网络中的DSLAM具有类似的功能，电缆调制解调器将HFC网络划分为下行和上行两个信道，一般下行高于上行速率，DOCSIS2.0和3.0的标准分别定义了 40 Mbps 和 1.2 Gbps 的下行速率和 30 Mbps和 100 Mbps的上行速率

​		电缆因特网的一个重要特征是共享广播媒体，根据此接入的特点，如果几个用户同时经下行信道下载东西，每个用户的实际速率将大大降低，因为都是共享的所以需要一个分布式多路访问协议来协调传输和避免碰撞

​		**FTTH光纤到户** Fiber To The Home,FTTH ：提供了一条从本地中心局直接到家庭的光纤路径，FTTH能够提供大约每秒千兆比特的因特网接入速率

​		最简单的光纤分布网络称为直接光纤，从本地中心局到每户设置一根光纤。而更为一般的是，从中心局出来的没跟光纤实际上由许多家庭共享，接近后在进行分配，此时的分配有两种光纤分布体系结构：有源光纤网络（Active Optical Network, AON）和无源光纤网络 PON，AON本质上就是交换以太网,而PON则如下图所示

​	<img src="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E8%8B%B1%E7%89%B9%E7%BD%91/image-20230218173431363.png" alt="image-20230218173431363" style="zoom:25%;" />

每个家庭有一个**光纤网络端接器**Optical Network Terminator,ONT ，它由专门的光纤连接到分配器，分配器连接到一根共享光纤，在连接到 光纤线路端接器 Optical Line Terminator,OLT ，而在家庭中，用户将一台家庭路由器与ONT相连，然后接入因特网

​		**5G固定式无线** ：使用波束成形技术，数据以无线方式从供应商的基站发送到家中的调制解调器，一个无线路由器与该调制解调器相连

<br>

#### 企业（家庭）接入：以太网和WiFi

​		**以太网** 以太网是到目前为止公司、大学和家庭网络中最为流行的接入技术，以太网是通过双绞铜线与一台以太网交换机相连，用户通常以100 Mbps 或几十Gbps 的速率接入以太网交换机

<img src="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E8%8B%B1%E7%89%B9%E7%BD%91/image-20230218175440316.png" alt="image-20230218175440316" style="zoom:25%;" />

​		**WiFi** 无线LAN用户通常必须位于距离接入点几十米的范围内，从接入点与企业网相连。基于IEEE802.11技术的无线LAN接入

​		而如今成为了家庭网络中常见的部件，将宽带住宅接入与廉价的无线局域网技术结合，组成强大的家庭网络

<img src="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E8%8B%B1%E7%89%B9%E7%BD%91/image-20230218192838615.png" alt="image-20230218192838615" style="zoom:25%;" />

<br>

#### 广域无线接入：3G、LTE4G和5G

<br>

### 物理媒介

​		物理媒介分成两种类型：**导引型媒介** guided media （沿着固体媒介前行）和 **非导引型媒介** （在空气或外层空间中传播）unguided media 

#### 		1.双绞铜线

​		最便宜、最耐用的导引型媒介，由两根绝缘的铜线组成，以规则的螺旋状排列。通常血多双绞线捆扎在一起形成一根电缆，并在这些双绞线外面覆盖上保护性防护层

#### 		2.同轴电缆

​		由两根铜导体组成，但两根导体是同心的而不是并行的，借助这种结构以及特殊的绝缘体和保护层，同轴电缆能够达到较高的数据传输速度。同轴电缆能被用作导引型共享媒介

#### 		3.光纤

​		光纤是一种细而柔软的能够导引光脉冲的媒介，其中的每个脉冲表示一个比特。不受电磁干扰，衰减极低，并且很难窃听。光载波（Optical Carrier,OC）

#### 		4.陆地无线电信道

​		有穿透墙壁、提供与移动用户的连接以及长距离承载信号的能力，因而成为一种有吸引力的媒介，无线电信道的特性极大依赖于传播环境和信号传输的距离。分为三类：一类运行在很短的距离，另一类运行在局域数十到几百米，第三类运行在广域，数万米，

#### 		5.卫星无线电信道

​		通信中常用的两类卫星：同步卫星和近地轨道卫星

<br>

<br>

<br>

## 网络核心

​	通过链路和交换机移动数据有两种基本方法：电路交换和分组交换

#### 分组交换

​		源端系统向目的端系统发送一个报文，源将长报文划分位较小的数据快称为分组，分组在两者之间需要通过分组交换机（主要有路由器和链路层交换机），分组以该链路最大传输速率的速度通过通信链路。如果分组长度为L bit,传输速率为R bps，则该分组所需时常为L/R s.

- 储存转发传输：多数使用此机制，必须先缓存该分组的比特，完成储存后才开始发送该分组。存在端到端的延时d<sub>end-end</sub>=N*L/R
  
- 排队时延和分组丢失：对于每条相连的链路，该分组交换机具有一个输出缓存，如果到达的分组需要传输到正在传输其他分组的链路上，该分组需要等待，故分组还要承受输出缓存的排队时延。又因为该缓存空间的大小是有限的，将会出现分组丢包的情况。

- 转发表和路由选择协议：每台路由器都有一个转发表，用于将目的ip地址映射为输出链路。而路由选择协议用于自动配置路由器的转发表。

#### 电路交换

​		在端系统间通信会话期间，预留了端系统见沿路径通信所需要的资源（缓存和链路传输速率），绘画报文按需使用这些资源，其后果可能是不得不等待接入通信线路。

- 电路交换网络中的复用：频分复用(FDM),由跨越链路船舰的所有连接共享，时分复用(TDM)，将时间划分成固定时段的帧，再将帧分为时隙。
- 分组和电路的对比：电路交换不考虑需求，而预先分配了传输链路，使得已经分配而并不需要的链路时间没有被应用，而分组交换按需分配链路。

#### 网络结构

- 网络结构1：用单一的全球传输ISP互联所有接入ISP
- 网络结构2：由数万接入ISP和多个全球传输ISP组成
- 网络结构3：接入ISP与区域ISP相连，较小的区域ISP与较大的区域ISP相连，较大的区域ISP与第一层ISP相连
- 网络结构4：加入因特网交换点(IXP),接入第一层ISP
- 网路结构5：顶部加入内容提供商网络的网络结构4

<img src="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E8%8B%B1%E7%89%B9%E7%BD%91/image-20230403213030051.png" alt="image-20230403213030051" style="zoom:20%;" />



## 分组交换中的时延、丢包和吞吐量

- #### 时延
  
  - 处理时延：检查分组首部和决定将该分组导向何处所需的时间
  - 排队时延：分组在链路上等待传输的时间
  - 传输时延：所有分组都到达后才被传输，L/R
  - 传播时延：从链路的起点传输道目的地所需的时间，d/s，传播速度取决于物理媒介
- #### 排队时延和丢包
  
  - 流量强度：La/R, a是分组到达队列的平均速率，R是传输速率，L为分组大小，流量强度不能大于1
  - 丢包：到达的分组发现队列满了，会被丢弃
- #### 端到端时延
  
  - Traceroute：认识时延工具
  - 端系统、应用程序和其他时延
- #### 吞吐量

  - 瞬时吞吐量：主机接收到文件的速率
  - 平均吞吐量：F/T，F为文件大小T为时间
  - 瓶颈链路：服务器与路由器之间的链路速率和路由器与客户的链路速率的最小值

## 协议层次及其服务模型

#### 协议分层

- 协议栈：各层的所有协议被，由五个层次组成
- 报文：位于应用层的信息分组
- 报文段：运输层的分组
- 数据报：网络层

#### 封装

- 链路层交换机实现第一层和第二层，路由器实现第一层到第三层，所以因特网路由器能过实现IP而链路层交换机不能
- 封装：应用层报文被传送给运输层，在最简单的情况下，运输层收取报文并附上附加信息，构成运输层报文段，运输层向网络层传递报文段，网络层增加了网络层首部信息，生成网络层数据报，传输给链路层，链路层增加链路层首部信息，生成链路层帧

## 面对攻击的网络

#### 经因特网将有害程序放入计算机

- 恶意软件：进入并感染设备
- 僵尸网络：数以千计的类似受害设备

#### 攻击服务器和网络基础设施

- 访问数字攻击图：可以观看世界范围内每天最厉害的DoS攻击
- DoS攻击类型
  - 弱点攻击：向一台目标主机上运行的一首攻击的应用程序或操作系统发送制作精细的报文
  - 带宽洪泛：攻击者向目标主机发送大量的分组，使接入链路变得拥塞，使合法的分组无法到达服务器
  - 连接洪泛：攻击者在目标主机创建大量的半开或全开TCP连接，使主机因这些伪造的连接停止接收合法的连接
- 分布式DoS(DDoS)：攻击者控制多个源并让每个源向目标猛烈发送流量

#### 嗅探分组

- 分组嗅探器：记录每个流经的分组副本的被动接收机

#### 伪装成信任的人

- IP哄骗：将具有虚假源地址的分组注入因特网
